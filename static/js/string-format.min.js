String.prototype.format=function(e,t){function n(e){if(s[e])return s[e];var n=[],r=/(%%)|(^%|(?=.)%)(?:(\d+)?([.,])?(\d+)?)?([a-zA-Z])/,i=0,o,u;if(!e)return n;for(;u=r.exec(e);)o={m:u[0],mi:u.index},"%%"===u[0]?o.t="%":(o.i=i++,o.s=u[4],o.t=u[6],o.h=[!u[3]&&0!==u[3]?t:parseInt(u[3],10),!u[5]&&0!==u[5]?t:parseInt(u[5],10)]),n.push(o),e=e.substr(u.index+u[0].length);return s[e]=n}function r(e){return e=e.split("."),e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")}function i(){for(var e=Array.prototype.slice.call(arguments),t="string"==typeof this?this:e.shift(),i=n(t),s=0,o=0;o<i.length;o++){var u=i[o],a=t.substring(0,s+u.mi),t=t.substring(s+u.mi+u.m.length),f="",c=e[u.i];switch(u.t){case"%":f="%";break;case"s":c=c||"",f=u.h[0]?u.h[1]?c.substr(u.h[0],u.h[1]):c.substring(0,u.h[0]):c;break;case"f":c=c||0,f=0<=u.h[1]?c.toFixed(u.h[1]):c.toString(),0!==u.h[0]&&1>c&&-1<c&&(f=f.replace(/0\./,".")),","===u.s&&(f=r(f));break;case"d":case"i":f=c?c.toFixed(0):"0",","===u.s&&(f=r(f))}s+=u.mi+f.length,t=a+f+t}return t}var s={};return i.parse=n,i}(this)
